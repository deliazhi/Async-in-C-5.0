#概述

让我们从了解C#5.0中的async特性开始吧。

###异步编程
当开始一个耗时操作时，与阻塞代码坐在那什么也做相对的，异步代码无需等待。

耗时操作包括：
+ 网络请求
+ 磁盘读取
+ 延时操作

区别在于运行代码的线程。在广泛使用的编程语言中，代码运行在操作系统的线程中。当发生耗时操作时，线程可以继续去做其他的事情，那么你的代码就是异步的，否则代码就是阻塞的。

> 当然，还有第三种处理耗时操作的方式——轮询，就是重复询问耗时操作是否完成。尽管在这个过程中也可以处理一些简单的操作，但它通常不是一个好的解决方案。

也许你已经在工作中用到了异步编程。比如你开启了一个新线程或者使用了线程池，这样线程就可以去处理其他的事情。再比如，你编写了一个web页面，web服务器的线程无需等待用户输入就可以访问其他页面。试想，如果采用控制台应用程序的设计模式，用Console.ReadLine()去接受用户的输入，将会是一种多么糟糕的设计。

异步编程的难点在于，这个耗时操作什么时候结束，以便继续执行下一步操作。而在阻塞型代码里，这是显而易见的，你只需要在长耗时代码的下一行写你的后续代码即可。而在一步代码里，这样就不起作用了，因为几乎可以肯定的是，你的下一行代码会在你异步操作完成之前就运行了。

为了解决这个问题，我们发明了一系列运行后台操作完成之后的代码模式：
+ 将代码写入到后台操作的主体函数之后
+ 注册一个耗时操作结束时可以触发的事件
+ 在耗时操作完成后传递一个委托或者lambda表达式（回调）

如果下一个操作需要在特定的线程上执行（例如WinForms或者WPF的UI线程），你还需要处理那个线程上的操作排序问题，这实在太复杂了。

### 异步编程的好处
异步编程释放了最开始执行的线程，这有许多好处,其一，线程占用更少的资源总是好的；其二，一个线程可以处理一件事情，就像UI线程，如果你没有及时释放线程，你的应用程序会出现未响应状态。我们将会在下一章详细讨论这些好处。

异步编程让我激动的最大原因是，它让我们享受到计算机并行计算带来的好处。异步编程让我们可以用一种更细粒度的并行性去构建自己的应用程序，而无需编写晦涩难懂的复杂代码。第十章将会详细介绍。

### 什么是异步编程
在C#5.0中，微软的编译团队新增了一个强大的特性。
它以两个关键词出现：
+ async
+ await
它还依赖.NET Framework4.5的其他一些附件和变化来发挥作用。
> Async是C#编译器的一个特性，不能被封装成一个类库。它对你的源代码起到了一个转换的作用，就如同C#之前版本中的Lambda和迭代器一样。

这个特性通过免除早期C#所需的复杂模式使异步编程变得非常简单，有了它，我们可以用一种异步风格编写整个项目了。

### Async做了什么





